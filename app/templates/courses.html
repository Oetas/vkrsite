{% extends "base.html" %}
{% block content %}
  <h1>Курсы</h1>
  <div class="row">
  {% for course in pagination.items %}
    <div class="col-md-4 mb-3">
      <div class="card">
        <div class="card-body">
          <h5 class="card-title">{{ course.title }}</h5>
          <p class="card-text">{{ course.description[:120] }}…</p>
          <a href="{{ url_for('main.course_detail', course_id=course.id) }}" class="btn btn-sm btn-outline-primary">Открыть</a>
        </div>
      </div>
    </div>
  {% endfor %}
  </div>

  {% if pagination.pages > 1 %}
  <nav>
    <ul class="pagination">
      {% if pagination.has_prev %}
      <li class="page-item"><a class="page-link" href="{{ url_for('main.courses', page=pagination.prev_num) }}">Prev</a></li>
      {% endif %}
      {% for p in range(1, pagination.pages+1) %}
      <li class="page-item {% if p==pagination.page %}active{% endif %}">
        <a class="page-link" href="{{ url_for('main.courses', page=p) }}">{{ p }}</a>
      </li>
      {% endfor %}
      {% if pagination.has_next %}
      <li class="page-item"><a class="page-link" href="{{ url_for('main.courses', page=pagination.next_num) }}">Next</a></li>
      {% endif %}
    </ul>
  </nav>
  {% endif %}
{% endblock %}
