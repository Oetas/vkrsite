{% extends "admin/base.html" %}

{% block admin_content %}
<h1>Отчёты</h1>

{% if pagination.items %}
    <ul class="list-group">
        {% for report in pagination.items %}
            <li class="list-group-item d-flex justify-content-between align-items-center">
                <div>
                    {{ report.type|upper }} — {{ report.created_at.strftime("%Y-%m-%d %H:%M") }}
                    {% if report.status %}<span class="badge bg-secondary">{{ report.status }}</span>{% endif %}
                </div>
                <div>
                    {% if report.file_id %}
                        <a href="{{ url_for('admin.download_report', report_id=report.id) }}" 
                           class="btn btn-sm btn-primary">Скачать</a>
                    {% else %}
                        <span class="text-muted">Нет файла</span>
                    {% endif %}
                </div>
            </li>
        {% endfor %}
    </ul>

    {% include "pagination.html" %}
{% else %}
    <p>Нет отчётов</p>
{% endif %}
{% endblock %}
