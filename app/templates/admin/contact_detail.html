{% extends "base.html" %}
{% block title %}Сообщение #{{ contact.id }}{% endblock %}

{% block content %}
  <h1>Сообщение #{{ contact.id }}</h1>
  <dl class="row">
    <dt class="col-sm-2">Имя</dt><dd class="col-sm-10">{{ contact.name }}</dd>
    <dt class="col-sm-2">Email</dt><dd class="col-sm-10">{{ contact.email }}</dd>
    <dt class="col-sm-2">Тема</dt><dd class="col-sm-10">{{ contact.subject or '-' }}</dd>
    <dt class="col-sm-2">Дата</dt><dd class="col-sm-10">{{ contact.created_at.strftime("%d.%m.%Y %H:%M") }}</dd>
  </dl>

  <h4>Сообщение</h4>
  <div class="border p-3 mb-3">{{ contact.message | nl2br }}</div>
  <form method="post" action="{{ url_for('admin.mark_contact_read', contact_id=contact.id) }}">
  {% if csrf_token is defined %}
    {{ csrf_token() }}
  {% endif %}
  <input type="hidden" name="next" value="{{ url_for('admin.contacts_list') }}">
  {% if not contact.is_read %}
    <button class="btn btn-success mb-3">Отметить как прочитанное</button>
  {% else %}
    <span class="badge bg-success mb-3">Прочитано</span>
  {% endif %}
  </form>

  <a class="btn btn-secondary" href="{{ url_for('admin.contacts_list') }}">← Назад</a>
{% endblock %}
