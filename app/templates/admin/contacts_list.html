{% extends "base.html" %}
{% block title %}Сообщения — админ{% endblock %}

{% block content %}
  <h1>Сообщения с формы контактов</h1>

  <table class="table table-striped">
    <thead>
      <tr><th>#</th><th>Имя</th><th>Email</th><th>Тема</th><th>Дата</th><th></th></tr>
    </thead>
    <tbody>
      {% for c in pagination.items %}
      <tr>
        <td>{{ c.id }}</td>
        <td>{{ c.name }}</td>
        <td>{{ c.email }}</td>
        <td>{{ c.subject or "-" }}</td>
        <td>{{ c.created_at.strftime("%d.%m.%Y %H:%M") }}</td>
        <td><a class="btn btn-sm btn-outline-primary" href="{{ url_for('admin.contact_detail', contact_id=c.id) }}">Открыть</a></td>
      </tr>
      {% endfor %}
    </tbody>
  </table>

  {% if pagination.pages > 1 %}
    <nav>
      <ul class="pagination">
      {% if pagination.has_prev %}
        <li class="page-item"><a class="page-link" href="{{ url_for('admin.contacts_list', page=pagination.prev_num) }}">Prev</a></li>
      {% endif %}
      {% for p in range(1, pagination.pages+1) %}
        <li class="page-item {% if p==pagination.page %}active{% endif %}">
          <a class="page-link" href="{{ url_for('admin.contacts_list', page=p) }}">{{ p }}</a>
        </li>
      {% endfor %}
      {% if pagination.has_next %}
        <li class="page-item"><a class="page-link" href="{{ url_for('admin.contacts_list', page=pagination.next_num) }}">Next</a></li>
      {% endif %}
      </ul>
    </nav>
  {% endif %}
{% endblock %}
